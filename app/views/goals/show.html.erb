<br/>
<br/>
<br/>
<br/>

<div class="container">

<p class="text-error"><%= notice %></p>

<div class="media">
	<a class="pull-left" href="#">
		<%= image_tag @goal.picture.url, :class => "media-object", :width => "300px", :height => "200px" %>
	</a>
	<div class="media-body">
		<div class="page-header">
			<h1>
				<% if !@is_current_user_joined %>
					<%= link_to 'Join', new_goal_instance_path(:goal_id => @goal.id), class: "btn btn-lg btn-primary"%>
				<%end%>
				<%= @goal.title %>
				<br/>
				<small><%= @goal.description %></small>
			</h1>
		</div>
		<div class="container">
			<div class="row">
				<%if @goal.user then %>
					Created by 
					<%= link_to @goal.user.first_name + " " + @goal.user.last_name, 
							{:controller => "goal_instances", :user_id => @goal.user.id}
					%>
				<%end%> 
			</div>
		</div>
	</div>	
</div>

<% if @current_followers.length != 0%>
	<!-- carousel -->
	<br/>
	<br/>
	<% number_loops = @current_followers.length / 6
	   if ( @current_followers.length % 6 != 0 )
	   		number_loops= number_loops+ 1
	   end
	%>
	
	<div id="myCarousel" class="carousel slide" data-ride="carousel">
	  <ol class="carousel-indicators">
	  	<% for i in 0..number_loops-1%>
	    	<li data-target="#myCarousel" data-slide-to="<%=i%>"></li>
	    <% end %>
	  </ol>
	  
	  
	  <div class="carousel-inner">
	  	<% for i in 0..number_loops-1%>
	    <div class="item  <%if i == 0 then%> active <%end%>" >
	      	<img width="100%" src="/assets/blue-001.jpg"></img>

	      	<div class="container">

		        <div class="carousel-caption">
		          
		          <h3 style="text-shadow: 0 0 0.5em black;">Currently Pursuing : <%=@current_followers.length%>  Followers</h3>
				  <div class="row">
				  	<%for j in 0..5%>
				  		<% index = i*6 + j %>
				  		<% if @current_followers[index] then %>
				  		<div class="col-md-2" style="margin-p"> 
				  			<%= @current_followers[index]["first_name"]%> 
				  			<br/> 
				  			<%= @current_followers[index]["last_name"] %> 
				  			<br/>
				  			<img width="100%" height="100%" src=<%=@current_followers[index]["picture"]["data"]["url"]%> />
				  		</div>
				  		<%end%>
				  	<%end%>
				  </div>
			    </div>
		    </div>
	    </div>
	    <% end %>
	  </div>
	  <a class="left carousel-control" href="#myCarousel" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span></a>
	  <a class="right carousel-control" href="#myCarousel" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span></a>
	</div>
	<!-- end of carousel-->
<%end%>
<br />

<% if @goal.user %>
	<% if @goal.user.id == @current_user.id %>
		<%= link_to 'Edit', edit_goal_path(@goal), class: "glyphicon glyphicon-edit" %> |
	<%end%>
<%end%>

<%= link_to 'Back', goals_path, :class => "btn btn-default" %>

<% if @goal.user %>
	<% if @goal.user.id == @current_user.id %>
		<%= button_to 'Delete', @goal, method: :delete, html_options: {confirm: "delete this goal?"} %>
	<%end%>
<%end%>
</div>
